sources <- list.files(pattern = ".R[^main]")
sources
sources <- list.files(pattern = ".R[^[main]]")
sources
notmain <- grep("main", sources)
notemain
notmain
sources <- list.files(pattern = ".R")
notmain <- grep("main", sources)
notmain
main <- grep("main", sources)
sources[-main]
calculate_GDD <- function(climateDataColumn){
cumsum(climateDataColumn - 10)
}
calculate_GDD_v <- Vectorize(calculate_GDD)
climate2012to13 <- climate2012to18_tdiff_daynum %>%
filter((year == 2012 & daynum <= 73)| (year == 2013 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2013to14 <- climate2012to18_tdiff_daynum %>%
filter((year == 2013 & daynum <= 73) | (year == 2014 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2014to15 <- climate2012to18_tdiff_daynum %>%
filter((year == 2014 & daynum <= 73) | (year == 2015 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2015to16 <- climate2012to18_tdiff_daynum %>%
filter((year == 2015 & daynum <= 73) | (year == 2016 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2016to17 <- climate2012to18_tdiff_daynum %>%
filter((year == 2016 & daynum <= 73) | (year == 2017 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2017to18 <- climate2012to18_tdiff_daynum %>%
filter((year == 2017 & daynum <= 73) | (year == 2018 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
climate2018to19 <- climate2012to18_tdiff_daynum %>%
filter((year == 2018 & daynum <= 73) | (year == 2019 & daynum >= 74)) %>%
select(daynum, tdiff, twoDayAvg) %>%
filter(!is.na(tdiff))
calculate_GDD_v(climate2012to13$twoDayAvg)
view(climate1981to2010_2)
climate2012to18
view(climate2012to18)
climate2012to18_GS <- climate2012to18 %>%
select(date = X1, year = X2, month = X3, day = X4, twoDayAvg = X9) %>%
.[c(-1:-14),] %>%
filter(month == 4, month == 5, month == 6, month == 7, month == 8) %>%
type_convert
climate2012to18_GS
climate2012to18_GS <- climate2012to18 %>%
select(date = X1, year = X2, month = X3, day = X4, twoDayAvg = X9) %>%
.[c(-1:-14),] %>%
filter(month != 5, month != 6, month != 7, month != 8) %>%
type_convert
climate2012to18_GS <- climate2012to18 %>%
select(date = X1, year = X2, month = X3, day = X4, twoDayAvg = X9) %>%
.[c(-1:-14),] %>%
filter(month != 1, month != 2, month != 3, month != 9, month != 10, month != 11, month != 12) %>%
type_convert
climate2012to187_GS
climate2012to18_GS
#calculating all final & intermediate LTE's
finalLTEpredictions(-10.54, -10.59, -10.59, "2012to13")
finalLTEpredictions(-13.6, -13.6, -13.6, "2013to14")
finalLTEpredictions(-9.77, -10.18, -10.18, "2014to15")
finalLTEpredictions(-12.84, -12.84, -12.84, "2015to16")
finalLTEpredictions(-11.84, -11.99, -11.99, "2016to17")
finalLTEpredictions(-13.25, -13.25, -13.25, "2017to18")
finalLTEprediction(-13.84, -13.84, -13.84, "2018to19")
finalLTEpredictions(-13.84, -13.84, -13.84, "2018to19")
predLTEfinal_2014to15
view(predLTEfinal_2014to15)
calculate_day(28,10)
calculate_day(11,11)
scale_2014to15
view(predLTE1_2014to15)
calculate_day(8,12)
IF3Dec8th <- function(daynum, today_estLTEperday, yesterday_predLTE1, daybeforeyesterday_predLTE1){
if((daynum == 50) & yesterday_predLTE1 < -24.5){#december 7th
value <- -24.5
}else{
value <- yesterday_predLTE1 + (yesterday_predLTE1 - daybeforeyesterday_predLTE1)
}
return(value)
}
finalLTEpredictions <- function(initialPredLTE1, initialPredLTE2, initialPredLTEfinal, yearRange){#yearRange == "2012to13" "2013to14" etc up to "2018to19"
predLTE1 <- tibble(predLTE1 = c(initialPredLTE1, rep(0, 175)))
assign(
x = paste0("predLTE1_", yearRange),
value = tibble(predLTE1 = c(initialPredLTE1, rep(0, 175))),
envir = .GlobalEnv #global environment for ease of checking. I guess it doesn't necessarily need to be outside of the current scope. Just nice to reference
)
assign(
x = paste0("predLTE2_", yearRange),
value = tibble(predLTE2 = c(initialPredLTE2, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = tibble(predLTEfinal = c(initialPredLTEfinal, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = get(paste0("climate", yearRange)),
envir = .GlobalEnv
)
temp1 <- get(paste0("predLTE1_", yearRange))
temp2 <- get(paste0("predLTE2_", yearRange))
temp3 <- get(paste0("predLTEfinal_", yearRange))
temp4 <- get(paste0("climatedf_", yearRange))
tempscale <- IF1_v(temp4$daynum, temp4$tdiff) + IF2_v(temp4$daynum, temp4$tdiff) %>%
as_tibble(tempscale = value)
for(index in 1:176){ #expect for the predLTE1 and predLTE2 to vary by +/- 0.1 C because of significant figures disparity. Data in csv is to 1 decimal point while excel sheet has data that is 2 decimal places. Check October 26th 2012 to 13 for a disparity in "scale"
#IF3 <- IF3 <- function(daynum, tempscale, today_estLTEperday, yesterday_predLTE1, yesterday_predLTE2)
#IF3Dec7th <- function(daynum, today_estLTEperday, yesterday_predLTE1, daybeforeyesterday_predLTE1)
#IF4567(daynum, yesterday_predLTE2, estLTE, yesterday_estLTE, estLTEperday, tempdiff, today_predLTE1, yesterday_predLTE1)
if(index == 1){
next
}else if(index == 49){
temp1$predLTE1[index] <- IF3Dec8th(index, estimatedLTE$estLTEperday[index], temp1$predLTE1[index - 1], temp1$predLTE1[index - 2])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}else{
temp1$predLTE1[index] <- IF3(index, tempscale$value[index], estimatedLTE$estLTEperday[index], temp1$predLTE1[index - 1], temp2$predLTE2[index - 1])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}
}
for(index in 1:176){
section <- calculate_section(index)
if(index == 1){
next
}else if(section == 1){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if8
}else if(section == 2 | section == 4 | section == 5){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if10
}else if(section == 3 | index == 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if9
}else if(section == 6 & index != 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
today_if11 <- IF11(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if10)
today_if12 <- IF12(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if11)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if12
}
}
assign(
x = paste0("predLTE1_", yearRange),
value = temp1,
envir = .GlobalEnv
)
assign(
x = paste0("predLTE2_", yearRange),
value = temp2,
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = temp3,
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = temp4,
envir = .GlobalEnv
)
assign(
x = paste0("scale_", yearRange),
value = tempscale,
envir = .GlobalEnv
)
}
finalLTEpredictions <- function(initialPredLTE1, initialPredLTE2, initialPredLTEfinal, yearRange){#yearRange == "2012to13" "2013to14" etc up to "2018to19"
predLTE1 <- tibble(predLTE1 = c(initialPredLTE1, rep(0, 175)))
assign(
x = paste0("predLTE1_", yearRange),
value = tibble(predLTE1 = c(initialPredLTE1, rep(0, 175))),
envir = .GlobalEnv #global environment for ease of checking. I guess it doesn't necessarily need to be outside of the current scope. Just nice to reference
)
assign(
x = paste0("predLTE2_", yearRange),
value = tibble(predLTE2 = c(initialPredLTE2, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = tibble(predLTEfinal = c(initialPredLTEfinal, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = get(paste0("climate", yearRange)),
envir = .GlobalEnv
)
temp1 <- get(paste0("predLTE1_", yearRange))
temp2 <- get(paste0("predLTE2_", yearRange))
temp3 <- get(paste0("predLTEfinal_", yearRange))
temp4 <- get(paste0("climatedf_", yearRange))
tempscale <- IF1_v(temp4$daynum, temp4$tdiff) + IF2_v(temp4$daynum, temp4$tdiff) %>%
as_tibble(tempscale = value)
for(index in 1:176){ #expect for the predLTE1 and predLTE2 to vary by +/- 0.1 C because of significant figures disparity. Data in csv is to 1 decimal point while excel sheet has data that is 2 decimal places. Check October 26th 2012 to 13 for a disparity in "scale"
#IF3 <- IF3 <- function(daynum, tempscale, today_estLTEperday, yesterday_predLTE1, yesterday_predLTE2)
#IF3Dec7th <- function(daynum, today_estLTEperday, yesterday_predLTE1, daybeforeyesterday_predLTE1)
#IF4567(daynum, yesterday_predLTE2, estLTE, yesterday_estLTE, estLTEperday, tempdiff, today_predLTE1, yesterday_predLTE1)
if(index == 1){
next
}else if(index == 50){
temp1$predLTE1[index] <- IF3Dec8th(index, temp1$predLTE1[index - 1], temp1$predLTE1[index - 2])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}else{
temp1$predLTE1[index] <- IF3(index, tempscale$value[index], estimatedLTE$estLTEperday[index], temp1$predLTE1[index - 1], temp2$predLTE2[index - 1])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}
}
for(index in 1:176){
section <- calculate_section(index)
if(index == 1){
next
}else if(section == 1){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if8
}else if(section == 2 | section == 4 | section == 5){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if10
}else if(section == 3 | index == 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if9
}else if(section == 6 & index != 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
today_if11 <- IF11(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if10)
today_if12 <- IF12(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if11)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if12
}
}
assign(
x = paste0("predLTE1_", yearRange),
value = temp1,
envir = .GlobalEnv
)
assign(
x = paste0("predLTE2_", yearRange),
value = temp2,
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = temp3,
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = temp4,
envir = .GlobalEnv
)
assign(
x = paste0("scale_", yearRange),
value = tempscale,
envir = .GlobalEnv
)
}
#calculating all final & intermediate LTE's
finalLTEpredictions(-10.54, -10.59, -10.59, "2012to13")
IF3Dec8th <- function(daynum, yesterday_predLTE1, daybeforeyesterday_predLTE1){
if((daynum == 50) & yesterday_predLTE1 < -24.5){#december 8th
value <- -24.5
}else{
value <- yesterday_predLTE1 + (yesterday_predLTE1 - daybeforeyesterday_predLTE1)
}
return(value)
}
finalLTEpredictions <- function(initialPredLTE1, initialPredLTE2, initialPredLTEfinal, yearRange){#yearRange == "2012to13" "2013to14" etc up to "2018to19"
predLTE1 <- tibble(predLTE1 = c(initialPredLTE1, rep(0, 175)))
assign(
x = paste0("predLTE1_", yearRange),
value = tibble(predLTE1 = c(initialPredLTE1, rep(0, 175))),
envir = .GlobalEnv #global environment for ease of checking. I guess it doesn't necessarily need to be outside of the current scope. Just nice to reference
)
assign(
x = paste0("predLTE2_", yearRange),
value = tibble(predLTE2 = c(initialPredLTE2, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = tibble(predLTEfinal = c(initialPredLTEfinal, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = get(paste0("climate", yearRange)),
envir = .GlobalEnv
)
temp1 <- get(paste0("predLTE1_", yearRange))
temp2 <- get(paste0("predLTE2_", yearRange))
temp3 <- get(paste0("predLTEfinal_", yearRange))
temp4 <- get(paste0("climatedf_", yearRange))
tempscale <- IF1_v(temp4$daynum, temp4$tdiff) + IF2_v(temp4$daynum, temp4$tdiff) %>%
as_tibble(tempscale = value)
for(index in 1:176){ #expect for the predLTE1 and predLTE2 to vary by +/- 0.1 C because of significant figures disparity. Data in csv is to 1 decimal point while excel sheet has data that is 2 decimal places. Check October 26th 2012 to 13 for a disparity in "scale"
#IF3 <- IF3 <- function(daynum, tempscale, today_estLTEperday, yesterday_predLTE1, yesterday_predLTE2)
#IF3Dec7th <- function(daynum, today_estLTEperday, yesterday_predLTE1, daybeforeyesterday_predLTE1)
#IF4567(daynum, yesterday_predLTE2, estLTE, yesterday_estLTE, estLTEperday, tempdiff, today_predLTE1, yesterday_predLTE1)
if(index == 1){
next
}else if(index == 50){
temp1$predLTE1[index] <- IF3Dec8th(index, temp1$predLTE1[index - 1], temp1$predLTE1[index - 2])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}else{
temp1$predLTE1[index] <- IF3(index, tempscale$value[index], estimatedLTE$estLTEperday[index], temp1$predLTE1[index - 1], temp2$predLTE2[index - 1])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}
}
for(index in 1:176){
section <- calculate_section(index)
if(index == 1){
next
}else if(section == 1){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if8
}else if(section == 2 | section == 4 | section == 5){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if10
}else if(section == 3 | index == 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if9
}else if(section == 6 & index != 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
today_if11 <- IF11(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if10)
today_if12 <- IF12(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if11)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if12
}
}
assign(
x = paste0("predLTE1_", yearRange),
value = temp1,
envir = .GlobalEnv
)
assign(
x = paste0("predLTE2_", yearRange),
value = temp2,
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = temp3,
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = temp4,
envir = .GlobalEnv
)
assign(
x = paste0("scale_", yearRange),
value = tempscale,
envir = .GlobalEnv
)
}
#calculating all final & intermediate LTE's
finalLTEpredictions(-10.54, -10.59, -10.59, "2012to13")
finalLTEpredictions(-13.6, -13.6, -13.6, "2013to14")
finalLTEpredictions(-9.77, -10.18, -10.18, "2014to15")
finalLTEpredictions(-12.84, -12.84, -12.84, "2015to16")
finalLTEpredictions(-11.84, -11.99, -11.99, "2016to17")
finalLTEpredictions(-13.25, -13.25, -13.25, "2017to18")
finalLTEpredictions(-13.84, -13.84, -13.84, "2018to19")
predLTE1_2014to15
view(predLTE1_2014to15)
calculate_day(7, 1)
calculate_day(7, 2)
calculate_day(1, 3)
climatedf_2014to15
climatedf_2014to15 %>% filter(daynum == 133)
scale_2014to15 %>% filter(daynum == 133)
scale_2014to15
scale_2014to15$value[133]
finalLTEpredictions <- function(initialPredLTE1, initialPredLTE2, initialPredLTEfinal, yearRange){#yearRange == "2012to13" "2013to14" etc up to "2018to19"
predLTE1 <- tibble(predLTE1 = c(initialPredLTE1, rep(0, 175)))
assign(
x = paste0("predLTE1_", yearRange),
value = tibble(predLTE1 = c(initialPredLTE1, rep(0, 175))),
envir = .GlobalEnv #global environment for ease of checking. I guess it doesn't necessarily need to be outside of the current scope. Just nice to reference
)
assign(
x = paste0("predLTE2_", yearRange),
value = tibble(predLTE2 = c(initialPredLTE2, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = tibble(predLTEfinal = c(initialPredLTEfinal, rep(0, 175))),
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = get(paste0("climate", yearRange)),
envir = .GlobalEnv
)
temp1 <- get(paste0("predLTE1_", yearRange))
temp2 <- get(paste0("predLTE2_", yearRange))
temp3 <- get(paste0("predLTEfinal_", yearRange))
temp4 <- get(paste0("climatedf_", yearRange))
tempscale <- IF1_v(temp4$daynum, temp4$tdiff) + IF2_v(temp4$daynum, temp4$tdiff) %>%
as_tibble(tempscale = value)
if(yearRange != "2015to16"){
tempscale$value[133] <- 0 #accounts for non leap years
}
for(index in 1:176){ #expect for the predLTE1 and predLTE2 to vary by +/- 0.1 C because of significant figures disparity. Data in csv is to 1 decimal point while excel sheet has data that is 2 decimal places. Check October 26th 2012 to 13 for a disparity in "scale"
#IF3 <- IF3 <- function(daynum, tempscale, today_estLTEperday, yesterday_predLTE1, yesterday_predLTE2)
#IF3Dec7th <- function(daynum, today_estLTEperday, yesterday_predLTE1, daybeforeyesterday_predLTE1)
#IF4567(daynum, yesterday_predLTE2, estLTE, yesterday_estLTE, estLTEperday, tempdiff, today_predLTE1, yesterday_predLTE1)
if(index == 1){
next
}else if(index == 50){
temp1$predLTE1[index] <- IF3Dec8th(index, temp1$predLTE1[index - 1], temp1$predLTE1[index - 2])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}else{
temp1$predLTE1[index] <- IF3(index, tempscale$value[index], estimatedLTE$estLTEperday[index], temp1$predLTE1[index - 1], temp2$predLTE2[index - 1])
temp2$predLTE2[index] <- IF4567(index, temp2$predLTE2[index - 1], estimatedLTE$estLTE[index], estimatedLTE$estLTE[index - 1], estimatedLTE$estLTEperday[index], temp4$tdiff[index], temp1$predLTE1[index], temp1$predLTE1[index - 1])
}
}
for(index in 1:176){
section <- calculate_section(index)
if(index == 1){
next
}else if(section == 1){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if8
}else if(section == 2 | section == 4 | section == 5){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if10
}else if(section == 3 | index == 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if9
}else if(section == 6 & index != 176){
today_if8 <- IF8(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1])
today_if9 <- IF9(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], today_if8)
today_if10 <- IF10(index, temp4$tdiff[index], temp2$predLTE2[index], temp2$predLTE2[index - 1], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if9)
today_if11 <- IF11(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if10)
today_if12 <- IF12(index, temp4$tdiff[index], temp3$predLTEfinal[index - 1], estimatedLTE$estLTE[index], today_if11)
temp3$predLTEfinal[index] <- temp3$predLTEfinal[index - 1] + today_if12
}
}
assign(
x = paste0("predLTE1_", yearRange),
value = temp1,
envir = .GlobalEnv
)
assign(
x = paste0("predLTE2_", yearRange),
value = temp2,
envir = .GlobalEnv
)
assign(
x = paste0("predLTEfinal_", yearRange),
value = temp3,
envir = .GlobalEnv
)
assign(
x = paste0("climatedf_", yearRange),
value = temp4,
envir = .GlobalEnv
)
assign(
x = paste0("scale_", yearRange),
value = tempscale,
envir = .GlobalEnv
)
}
#calculating all final & intermediate LTE's
finalLTEpredictions(-10.54, -10.59, -10.59, "2012to13")
finalLTEpredictions(-13.6, -13.6, -13.6, "2013to14")
finalLTEpredictions(-9.77, -10.18, -10.18, "2014to15")
finalLTEpredictions(-12.84, -12.84, -12.84, "2015to16")
finalLTEpredictions(-11.84, -11.99, -11.99, "2016to17")
finalLTEpredictions(-13.25, -13.25, -13.25, "2017to18")
finalLTEpredictions(-13.84, -13.84, -13.84, "2018to19")
scale2014to15$value[133]
scale_2014to15$value[133]
scale_2014to15$value[134]
scale_2014to15$value[132]
predLTE1_2014to15
predLTE1_2014to15$predLTE1[133]
predLTE1_2014to15$predLTE1[134]
predLTE1_2014to15$predLTE1[132]
predLTE1_2014to15$predLTE1[calculate_day(11,4)]
predLTE1_2014to15$predLTE1[calculate_day(30,3)]
predLTEfinal_2014to15$predLTEfinal[calculate_day(18, 3)]
